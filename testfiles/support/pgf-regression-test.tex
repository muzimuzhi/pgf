\input regression-test.tex

\OMIT

\newbox\PGFTESTBOX

\def\BEGINPGFTEST#1{%
  \BEGINTEST{pgf: #1}%
  \setbox\PGFTESTBOX=\hbox\bgroup
    \pgfpicture
}

\def\ENDPGFTEST{%
    \endpgfpicture
  \egroup
  \begingroup
    \showboxbreadth=\maxdimen
    \showboxdepth=\maxdimen
    \showbox\PGFTESTBOX
  \endgroup
  \ENDTEST
}

\def\BEGINTIKZTEST#1{%
  \BEGINTEST{tikz: #1}%
  \setbox\PGFTESTBOX=\hbox\bgroup
    \tikzpicture
}

\def\ENDTIKZTEST{%
    \endtikzpicture
  \egroup
  \begingroup
    \showboxbreadth=\maxdimen
    \showboxdepth=\maxdimen
    \showbox\PGFTESTBOX
  \endgroup
  \ENDTEST
}

% normalize error messages across different check engines
\catcode`\@=11\relax
\def\pgfutil@packageerror#1#2#3{\TYPE{Package #1 Error: #2.}}
\def\pgfutil@packagewarning#1#2{\TYPE{Package #1 Warning: #2.}}
\catcode`\@=12\relax

\TIMO
